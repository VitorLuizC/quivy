!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.quivy={})}(this,function(n){"use strict";var e={},t=[];function i(n){var e=n.name,t=n.source,i=n.item,r=function(n){return function(e){n(e),e.preventDefault(),e.stopPropagation()}};return new Promise(function(o,a){var u='Error on loading "'+e+'" resource. From "'+t+'".',c=r(function(n){return a(new Error(u))}),d=r(function(e){return o(n)});i.addEventListener("load",d),i.addEventListener("abort",c),i.addEventListener("error",c),i.src=t})}function r(){var n=t.length,r=0;return new Promise(function(o,a){for(var u=0;u<n;u++){i(t.pop()).then(function(t){e[t.name]=t.item,++r===n&&o(e)}).catch(function(n){a(n)})}})}var o=Object.freeze({cache:e,add:function n(i,o,a){void 0===a&&(a="image");var u=e.hasOwnProperty(i),c=t.find(function(n){return n.name===i});if(u)throw new Error('Resource "'+i+'" already exists in cache.');if(c)throw new Error('Resource "'+i+"\" already exists and hasn't loaded yet.");var d=null;switch(a){case"image":d=new Image;break;case"audio":d=new Audio;break;case"video":d=new Video;break;default:throw new Error('Invalid resource type "'+a+'".')}return t.push({name:i,source:o,item:d}),{cache:e,add:n,load:r}},load:r,onLoading:function(n,e,t){},onLoad:function(n){},onError:function(n){}});function a(){return null!==this.id&&(cancelAnimationFrame(this.id),this.id=null,!0)}function u(){return null===this.id&&(this.id=requestAnimationFrame(function n(){this.animation();null!==this.id&&(this.id=requestAnimationFrame(n.bind(this)))}.bind(this)),!0)}function c(n,e){void 0===e&&(e={});var t=d(n);if(t instanceof HTMLCanvasElement){var i=e.width;void 0===i&&(i=640);var r=e.height;void 0===r&&(r=480);var o=e.context;void 0===o&&(o="2d");var a=e.attributes;return t.width=i,t.height=r,{element:t,context:t.getContext(o,a)}}console.log("Can't get <canvas>")}function d(n){return"string"==typeof n?document.querySelector(n):n}var s=Object.freeze({create:function(n,e){var t=document.createElement("canvas"),i=d(n);if(i instanceof HTMLElement)return i.appendChild(t),c(t,e);console.log("Can't append <canvas> to \""+i+'"')},select:c});n.loader=o,n.animate=function(n){var e={animation:n,id:null};return{get animation(){return e.animation},set animation(n){e.animation=n},stop:a.bind(e),start:u.bind(e)}},n.canvas=s,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=quivy.min.js.map
